#!/bin/sh
# TypeScript/JavaScript Pre-Commit Hook
# Generated by @hivellm/rulebook

echo "ğŸ” Running TypeScript/JavaScript pre-commit checks..."

# Type check
if grep -q '"type-check"' package.json 2>/dev/null; then
  echo "  â†’ Type checking..."
  npm run type-check || {
    echo "âŒ Type check failed"
    exit 1
  }
fi

# Lint
if grep -q '"lint"' package.json 2>/dev/null; then
  echo "  â†’ Linting..."
  npm run lint || {
    echo "âŒ Linting failed"
    exit 1
  }
fi

# Format check
if command -v prettier &> /dev/null; then
  echo "  â†’ Format checking..."
  npx prettier --check "src/**/*.{ts,tsx,js,jsx}" || {
    echo "âŒ Format check failed. Run: npm run format"
    exit 1
  }
fi

# Tests
if grep -q '"test"' package.json 2>/dev/null; then
  echo "  â†’ Running tests..."
  npm test || {
    echo "âŒ Tests failed"
    exit 1
  }
fi

echo "âœ… All TypeScript/JavaScript pre-commit checks passed!"
exit 0

