#!/bin/sh
# TypeScript/JavaScript Pre-Commit Hook
# Generated by @hivellm/rulebook
# Fast checks only: formatting, linting, type-check (no tests for backup commits)

echo "ğŸ” Running TypeScript/JavaScript pre-commit checks..."

# Format check
if command -v prettier &> /dev/null; then
  echo "  â†’ Format checking..."
  npx prettier --check "src/**/*.{ts,tsx,js,jsx}" "tests/**/*.{ts,tsx,js,jsx}" 2>/dev/null || {
    echo "âŒ Format check failed. Run: npm run format"
    exit 1
  }
fi

# Lint
if grep -q '"lint"' package.json 2>/dev/null; then
  echo "  â†’ Linting..."
  npm run lint || {
    echo "âŒ Linting failed"
    exit 1
  }
fi

# Type check
if grep -q '"type-check"' package.json 2>/dev/null; then
  echo "  â†’ Type checking..."
  npm run type-check || {
    echo "âŒ Type check failed"
    exit 1
  }
fi

echo "âœ… All TypeScript/JavaScript pre-commit checks passed!"
exit 0

