#!/bin/sh
# TypeScript/JavaScript Pre-Push Hook
# Generated by @hivellm/rulebook

echo "ğŸš€ Running TypeScript/JavaScript pre-push checks..."

# Build (MANDATORY before push)
if grep -q '"build"' package.json 2>/dev/null; then
  echo "  â†’ Building..."
  npm run build || {
    echo "âŒ Build failed"
    exit 1
  }
fi

# Full test suite
if grep -q '"test"' package.json 2>/dev/null; then
  echo "  â†’ Running full test suite..."
  npm test || {
    echo "âŒ Tests failed"
    exit 1
  }
fi

# Coverage check
if grep -q '"test:coverage"' package.json 2>/dev/null; then
  echo "  â†’ Checking coverage..."
  npm run test:coverage || {
    echo "âŒ Coverage check failed"
    exit 1
  }
fi

echo "âœ… All TypeScript/JavaScript pre-push checks passed!"
exit 0

