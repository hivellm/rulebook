#!/bin/sh
# PHP Pre-Commit Hook
# Generated by @hivellm/rulebook

echo "ğŸ” Running PHP pre-commit checks..."

# Format & Lint
if command -v php-cs-fixer &> /dev/null; then
  echo "  â†’ Format checking..."
  php-cs-fixer fix --dry-run --diff || {
    echo "âŒ Format check failed. Run: php-cs-fixer fix"
    exit 1
  }
fi

# Static analysis
if command -v phpstan &> /dev/null; then
  echo "  â†’ Static analysis..."
  phpstan analyze || {
    echo "âŒ PHPStan failed"
    exit 1
  }
fi

# Tests
if command -v phpunit &> /dev/null; then
  echo "  â†’ Running tests..."
  phpunit || {
    echo "âŒ Tests failed"
    exit 1
  }
fi

echo "âœ… All PHP pre-commit checks passed!"
exit 0

