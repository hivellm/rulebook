#!/bin/sh
# Kotlin Pre-Commit Hook
# Generated by @hivellm/rulebook

echo "ğŸ” Running Kotlin pre-commit checks..."

# Lint
echo "  â†’ Linting..."
./gradlew ktlintCheck || {
  echo "âŒ ktlint failed. Run: ./gradlew ktlintFormat"
  exit 1
}

# Detekt
if ./gradlew tasks --all | grep -q detekt; then
  echo "  â†’ Running Detekt..."
  ./gradlew detekt || {
    echo "âŒ Detekt failed"
    exit 1
  }
fi

# Tests
echo "  â†’ Running tests..."
./gradlew test || {
  echo "âŒ Tests failed"
  exit 1
}

echo "âœ… All Kotlin pre-commit checks passed!"
exit 0

