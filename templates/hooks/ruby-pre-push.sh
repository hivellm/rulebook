#!/bin/sh
# Ruby Pre-Push Hook
# Generated by @hivellm/rulebook

echo "ğŸš€ Running Ruby pre-push checks..."

# Full test suite
if command -v rspec &> /dev/null; then
  echo "  â†’ Running full test suite..."
  bundle exec rspec || {
    echo "âŒ Tests failed"
    exit 1
  }
elif command -v rake &> /dev/null; then
  echo "  â†’ Running tests..."
  bundle exec rake test || {
    echo "âŒ Tests failed"
    exit 1
  }
fi

# Security audit
if command -v bundler-audit &> /dev/null; then
  echo "  â†’ Security audit..."
  bundle exec bundler-audit check --update || {
    echo "âš ï¸  Security vulnerabilities found"
  }
fi

echo "âœ… All Ruby pre-push checks passed!"
exit 0

