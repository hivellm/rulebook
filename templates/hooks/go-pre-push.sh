#!/bin/sh
# Go Pre-Push Hook
# Generated by @hivellm/rulebook

echo "üöÄ Running Go pre-push checks..."

# Full test suite with coverage
echo "  ‚Üí Running tests with coverage..."
go test -cover ./... || {
  echo "‚ùå Tests failed"
  exit 1
}

# Build
echo "  ‚Üí Building..."
go build ./... || {
  echo "‚ùå Build failed"
  exit 1
}

# Security check (if gosec available)
if command -v gosec &> /dev/null; then
  echo "  ‚Üí Security scan..."
  gosec ./... || {
    echo "‚ö†Ô∏è  Security issues found"
  }
fi

echo "‚úÖ All Go pre-push checks passed!"
exit 0

