#!/bin/sh
# Python Pre-Push Hook
# Generated by @hivellm/rulebook

echo "ğŸš€ Running Python pre-push checks..."

# Full test suite with coverage
if command -v pytest &> /dev/null; then
  echo "  â†’ Running full test suite with coverage..."
  pytest --cov --cov-report=term-missing || {
    echo "âŒ Tests or coverage failed"
    exit 1
  }
fi

# Security audit
if [ -f "requirements.txt" ] && command -v pip-audit &> /dev/null; then
  echo "  â†’ Security audit..."
  pip-audit || {
    echo "âš ï¸  Security vulnerabilities found"
  }
fi

echo "âœ… All Python pre-push checks passed!"
exit 0
