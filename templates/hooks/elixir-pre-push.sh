#!/bin/sh
# Elixir Pre-Push Hook
# Generated by @hivellm/rulebook

echo "üöÄ Running Elixir pre-push checks..."

# Full test suite
echo "  ‚Üí Running full test suite..."
mix test || {
  echo "‚ùå Tests failed"
  exit 1
}

# Compile release
echo "  ‚Üí Compiling release..."
MIX_ENV=prod mix compile || {
  echo "‚ùå Compilation failed"
  exit 1
}

# Dialyzer (if configured)
if mix help dialyzer &> /dev/null 2>&1; then
  echo "  ‚Üí Running Dialyzer..."
  mix dialyzer || {
    echo "‚ö†Ô∏è  Dialyzer warnings found"
  }
fi

echo "‚úÖ All Elixir pre-push checks passed!"
exit 0

