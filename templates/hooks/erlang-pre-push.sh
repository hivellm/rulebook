#!/bin/sh
# Erlang Pre-Push Hook
# Generated by @hivellm/rulebook

echo "ğŸš€ Running Erlang pre-push checks..."

# Compile
echo "  â†’ Compiling..."
rebar3 compile || {
  echo "âŒ Compilation failed"
  exit 1
}

# Full test suite
echo "  â†’ Running EUnit tests..."
rebar3 eunit || {
  echo "âŒ EUnit tests failed"
  exit 1
}

echo "  â†’ Running Common Test..."
rebar3 ct || {
  echo "âŒ Common Test failed"
  exit 1
}

# Coverage (if configured)
if rebar3 help cover &> /dev/null 2>&1; then
  echo "  â†’ Coverage check..."
  rebar3 cover || {
    echo "âš ï¸  Coverage check failed"
  }
fi

echo "âœ… All Erlang pre-push checks passed!"
exit 0

