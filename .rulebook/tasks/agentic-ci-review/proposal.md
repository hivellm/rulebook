# Proposal: Agentic Code Review in CI

## Context

Teams want AI code review as part of their CI/CD pipeline. This feature adds a `rulebook review` command that can be run in GitHub Actions to provide AI-powered code review on pull requests.

## Solution

1. **`rulebook review`** command that:
   - Gets the diff of current branch vs main
   - Sends diff + project rules (AGENTS.md, .rulebook/specs/) to configured AI tool
   - Outputs structured review as GitHub PR comment (via `gh` CLI)
   - Fails CI if review detects critical issues

2. **GitHub Actions workflow** generated by `rulebook init`:
   ```yaml
   # .github/workflows/rulebook-review.yml
   - name: AI Code Review
     run: npx @hivehub/rulebook@latest review --output github-comment
   ```

3. **Review output format**:
   - Summary: overall assessment
   - Issues: list with severity (CRITICAL/MAJOR/MINOR)
   - Suggestions: improvement recommendations
   - Passes: if no CRITICAL issues, exits 0

## Files to Create

- `src/core/review-manager.ts` — new module
- `templates/ci/review.yml` — GitHub Actions workflow template
- `tests/review-manager.test.ts` — new test file

## Files to Modify

- `src/cli/commands.ts` — add `review` command
- `src/index.ts` — register review command
- `src/core/workflow-generator.ts` — add review workflow generation
